1.Общая характеристика решения

В рамках кейс-задачи № 4 было разработано stand-alone WEB-приложение на языке Object Pascal (Delphi) с использованием технологии WebBroker.
Приложение функционирует как самостоятельный HTTP-сервер и обеспечивает доступ к данным через веб-браузер без использования IIS.

Для хранения и обработки данных используется Microsoft SQL Server Express, подключение к которому осуществляется посредством библиотеки FireDAC с применением Windows Authentication.

2. Архитектура приложения

Приложение построено по классической клиент-серверной архитектуре и включает следующие основные компоненты:

консольное серверное приложение (UFOWeb.exe);

Web-модуль (TWebModule1), обрабатывающий HTTP-запросы;

база данных UFOWebDB в MS SQL Server.

HTTP-сервер реализован с использованием компонента
TIdHTTPWebBrokerBridge, который прослушивает порт 8080 и принимает запросы от клиентов (браузеров).

3.Запуск и работа сервера

При запуске приложения:

Инициализируется HTTP-сервер;

Выполняется регистрация Web-модуля;

Производится попытка подключения к SQL Server;

При отсутствии базы данных выполняется её автоматическое создание;

Проверяется наличие таблиц и при необходимости создаются тестовые данные.

В случае отсутствия соединения с СУБД приложение автоматически переходит в демо-режим, используя встроенные тестовые данные, что обеспечивает устойчивость работы.

4.Работа с базой данных

Для взаимодействия с MS SQL Server используется библиотека FireDAC:

TFDConnection — управление соединением;

TFDQuery — выполнение SQL-запросов;

TFDPhysMSSQLDriverLink — настройка драйвера.

В процессе инициализации приложения автоматически:

создаётся база данных UFOWebDB (при отсутствии);

создаётся таблица ufo_reports;

добавляются тестовые записи.

Таким образом, приложение не требует предварительной ручной настройки базы данных.

5. Реализованные WEB-маршруты (endpoints)

В Web-модуле реализована система маршрутизации HTTP-запросов:

URL	Назначение
/	Главная страница с общей статистикой
/reports	Просмотр списка отчётов о НЛО
/add	Форма добавления нового отчёта
/stats	Статистическая информация
/api/data	REST-API, возвращающее данные в формате JSON
/admin/db	Страница управления базой данных

Каждый маршрут обрабатывается отдельным методом Web-модуля.

6.Формирование пользовательского интерфейса

HTML-страницы формируются динамически на стороне сервера.
Для генерации HTML используется:

компонент TPageProducer;

строковая генерация HTML-разметки;

встроенные CSS-стили.

Интерфейс включает:

меню навигации;

таблицы данных;

статистические блоки;

формы ввода данных;

индикацию состояния подключения к базе данных.

7.Реализация REST-API

Для интеграции с внешними системами реализован REST-интерфейс:

/api/data


Данный endpoint возвращает данные в формате JSON, включая:

список наблюдений;

общее количество записей;

состояние подключения к базе данных;

временную метку запроса.

8.Надёжность и отказоустойчивость

Приложение предусматривает:

обработку исключений;

автоматическое переключение в демо-режим;

проверку доступности драйверов SQL Server;

безопасное завершение работы сервера.

Это обеспечивает стабильную работу даже при отсутствии СУБД.

8.Итог

В результате выполнения кейс-задачи № 4 было создано полнофункциональное WEB-приложение, реализующее:

запуск собственного HTTP-сервера;

работу с MS SQL Server;

динамическую генерацию HTML-страниц;

REST-API;

автоматическую инициализацию базы данных.

Разработанное решение полностью соответствует требованиям задания и демонстрирует принципы построения серверных WEB-приложений.